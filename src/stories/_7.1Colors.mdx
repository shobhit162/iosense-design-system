import { Meta } from "@storybook/blocks";

<Meta title="Tokens/Colors/Theme" />

{/* Helper function to convert hex to rgb */}
export const hexToRgb = (hex) => {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
};

{/* Helper function to convert hex-based rgba to valid CSS rgba */}
export const convertHexRgba = (value) => {
  if (value.includes('rgba(#')) {
    const matches = value.match(/rgba\(#([A-Fa-f0-9]{6}),\s*([\d.]+)\)/);
    if (matches) {
      const hex = matches[1];
      const alpha = matches[2];
      const rgb = hexToRgb(`#${hex}`);
      return rgb ? `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alpha})` : value;
    }
  }
  return value;
};

export const colors = {
  surface: {
    bright: { 
      name: 'surface-bright', 
      value: 'var(--surface-surface-bright)',
      color: '#FFFFFF' 
    },
    main: { 
      name: 'surface', 
      value: 'var(--surface-surface)',
      color: '#EEEEEE' 
    },
    dim: { 
      name: 'surface-dim', 
      value: 'var(--surface-surface-dim)',
      color: '#D3D3D3' 
    }
  },
  surfaceContainer: {
    lowest: { 
      name: 'surface-container-lowest', 
      value: 'var(--surface-container-surface-container-lowest)',
      color: '#FFFFFF' 
    },
    low: { 
      name: 'surface-container-low', 
      value: 'var(--surface-container-surface-container-low)',
      color: '#F4F5F6' 
    },
    main: { 
      name: 'surface-container', 
      value: 'var(--surface-container-surface-container)',
      color: '#E2E2E2' 
    },
    high: { 
      name: 'surface-container-high', 
      value: 'var(--surface-container-surface-container-high)',
      color: '#D3D3D3' 
    },
    highest: { 
      name: 'surface-container-highest', 
      value: 'var(--surface-container-surface-container-highest)',
      color: '#BCBCBC' 
    }
  },
  onSurface: {
    lowest: { 
      name: 'on-surface-lowest', 
      value: 'var(--on-surface-on-surface-lowest)',
      color: '#909090' 
    },
    low: { 
      name: 'on-surface-low', 
      value: 'var(--on-surface-on-surface-low)',
      color: '#646465' 
    },
    main: { 
      name: 'on-surface', 
      value: 'var(--on-surface-on-surface)',
      color: '#2B2B2B' 
    }
  },
  outline: {
    bright: { 
      name: 'outline-bright', 
      value: 'var(--outline-outline-bright)',
      color: '#E2E2E2' 
    },
    main: { 
      name: 'outline', 
      value: 'var(--outline-outline)',
      color: '#BCBCBC' 
    },
    dim: { 
      name: 'outline-dim', 
      value: 'var(--outline-outline-dim)',
      color: '#909090' 
    }
  },
primary: {
  main: {
    name: 'primary',
    value: {
      color: 'var(--primary-on-primary)',
      backgroundColor: 'var(--primary-primary)'
    },
    color1: '#2F4050',
    color2: '#FFFFFF',
    example: 'White text on charcoal blue background'
  },
  onMain: {
    name: 'on-primary',
    value: {
      color: 'var(--primary-primary)',
      backgroundColor: 'var(--primary-on-primary)'
    },
    color1: '#FFFFFF',
    color2: '#2F4050',
    example: 'Charcoal blue text on white background'
  },
  container: {
    name: 'primary-container',
    value: {
      color: 'var(--primary-on-primary-container)',
      backgroundColor: 'var(--primary-primary-container)'
    },
    color1: '#E3E5E7',
    color2: '#2F4050',
    example: 'Charcoal blue text on light charcoal blue background'
  },
  onContainer: {
    name: 'on-primary-container',
    value: {
      color: 'var(--primary-primary-container)',
      backgroundColor: 'var(--primary-on-primary-container)'
    },
    color1: '#2F4050',
    color2: '#E3E5E7',
    example: 'Light charcoal blue text on charcoal blue background'
  }
},
secondary: {
  main: {
    name: 'secondary',
    value: {
      color: 'var(--secondary-on-secondary)',
      backgroundColor: 'var(--secondary-secondary)'
    },
    color1: '#1AB394',
    color2: '#FFFFFF',
    example: 'White text on aqua green background'
  },
  onMain: {
    name: 'on-secondary',
    value: {
      color: 'var(--secondary-secondary)',
      backgroundColor: 'var(--secondary-on-secondary)'
    },
    color1: '#FFFFFF',
    color2: '#1AB394',
    example: 'Aqua green text on white background'
  },
  container: {
    name: 'secondary-container',
    value: {
      color: 'var(--secondary-on-secondary-container)',
      backgroundColor: 'var(--secondary-secondary-container)'
    },
    color1: '#E7F6F1',
    color2: '#1AB394',
    example: 'Aqua green text on light aqua green background'
  },
  onContainer: {
    name: 'on-secondary-container',
    value: {
      color: 'var(--secondary-secondary-container)',
      backgroundColor: 'var(--secondary-on-secondary-container)'
    },
    color1: '#1AB394',
    color2: '#E7F6F1',
    example: 'Light aqua green text on aqua green background'
  }
},
status: {
  error: {
    main: {
      name: 'error',
      value: {
        color: 'var(--error-on-error)',
        backgroundColor: 'var(--error-error)'
      },
      color1: '#D92D20',
      color2: '#FFFFFF',
      example: 'White text on red background'
    },
    onMain: {
      name: 'on-error',
      value: {
        color: 'var(--error-error)',
        backgroundColor: 'var(--error-on-error)'
      },
      color1: '#FFFFFF',
      color2: '#D92D20',
      example: 'Red text on white background'
    },
    container: {
      name: 'error-container',
      value: {
        color: 'var(--error-on-error-container)',
        backgroundColor: 'var(--error-error-container)'
      },
      color1: '#FFE4DC',
      color2: '#D92D20',
      example: 'Red text on light red background'
    },
    onContainer: {
      name: 'on-error-container',
      value: {
        color: 'var(--error-error-container)',
        backgroundColor: 'var(--error-on-error-container)'
      },
      color1: '#D92D20',
      color2: '#FFE4DC',
      example: 'Light red text on red background'
    }
  },
  warning: {
    main: {
      name: 'warning',
      value: {
        color: 'var(--warning-on-warning)',
        backgroundColor: 'var(--warning-warning)'
      },
      color1: '#FFAB00',
      color2: '#FFFFFF',
      example: 'White text on yellow background'
    },
    onMain: {
      name: 'on-warning',
      value: {
        color: 'var(--warning-warning)',
        backgroundColor: 'var(--warning-on-warning)'
      },
      color1: '#FFFFFF',
      color2: '#FFAB00',
      example: 'Yellow text on white background'
    },
    container: {
      name: 'warning-container',
      value: {
        color: 'var(--warning-on-warning-container)',
        backgroundColor: 'var(--warning-warning-container)'
      },
      color1: '#FFF3DF',
      color2: '#FFAB00',
      example: 'Yellow text on light yellow background'
    },
    onContainer: {
      name: 'on-warning-container',
      value: {
        color: 'var(--warning-warning-container)',
        backgroundColor: 'var(--warning-on-warning-container)'
      },
      color1: '#FFAB00',
      color2: '#FFF3DF',
      example: 'Light yellow text on yellow background'
    }
  },
  success: {
    main: {
      name: 'success',
      value: {
        color: 'var(--success-on-success)',
        backgroundColor: 'var(--success-success)'
      },
      color1: '#00A251',
      color2: '#FFFFFF',
      example: 'White text on green background'
    },
    onMain: {
      name: 'on-success',
      value: {
        color: 'var(--success-success)',
        backgroundColor: 'var(--success-on-success)'
      },
      color1: '#FFFFFF',
      color2: '#00A251',
      example: 'Green text on white background'
    },
    container: {
      name: 'success-container',
      value: {
        color: 'var(--success-on-success-container)',
        backgroundColor: 'var(--success-success-container)'
      },
      color1: '#EBFAF3',
      color2: '#00A251',
      example: 'Green text on light green background'
    },
    onContainer: {
      name: 'on-success-container',
      value: {
        color: 'var(--success-success-container)',
        backgroundColor: 'var(--success-on-success-container)'
      },
      color1: '#00A251',
      color2: '#EBFAF3',
      example: 'Light green text on green background'
    }
  }
},
extended: {
  extend1: {
    main: {
      name: 'extend-1',
      value: {
        color: 'var(--extend-1-on-extend-1)',
        backgroundColor: 'var(--extend-1-extend-1)'
      },
      color1: '#F3168D',
      color2: '#FFFFFF',
      example: 'White text on pink background'
    },
    onMain: {
      name: 'on-extend-1',
      value: {
        color: 'var(--extend-1-extend-1)',
        backgroundColor: 'var(--extend-1-on-extend-1)'
      },
      color1: '#FFFFFF',
      color2: '#F3168D',
      example: 'Pink text on white background'
    },
    container: {
      name: 'extend-1-container',
      value: {
        color: 'var(--extend-1-on-extend-1-container)',
        backgroundColor: 'var(--extend-1-extend-1-container)'
      },
      color1: '#FFE5EE',
      color2: '#F3168D',
      example: 'Pink text on light pink background'
    },
    onContainer: {
      name: 'on-extend-1-container',
      value: {
        color: 'var(--extend-1-extend-1-container)',
        backgroundColor: 'var(--extend-1-on-extend-1-container)'
      },
      color1: '#F3168D',
      color2: '#FFE5EE',
      example: 'Light pink text on pink background'
    }
  },
  extend2: {
    main: {
      name: 'extend-2',
      value: {
        color: 'var(--extend-2-on-extend-2)',
        backgroundColor: 'var(--extend-2-extend-2)'
      },
      color1: '#8F1BC6',
      color2: '#FFFFFF',
      example: 'White text on purple background'
    },
    onMain: {
      name: 'on-extend-2',
      value: {
        color: 'var(--extend-2-extend-2)',
        backgroundColor: 'var(--extend-2-on-extend-2)'
      },
      color1: '#FFFFFF',
      color2: '#8F1BC6',
      example: 'Purple text on white background'
    },
    container: {
      name: 'extend-2-container',
      value: {
        color: 'var(--extend-2-on-extend-2-container)',
        backgroundColor: 'var(--extend-2-extend-2-container)'
      },
      color1: '#F7E2FE',
      color2: '#8F1BC6',
      example: 'Purple text on light purple background'
    },
    onContainer: {
      name: 'on-extend-2-container',
      value: {
        color: 'var(--extend-2-extend-2-container)',
        backgroundColor: 'var(--extend-2-on-extend-2-container)'
      },
      color1: '#8F1BC6',
      color2: '#F7E2FE',
      example: 'Light purple text on purple background'
    }
  },
  extend3: {
    main: {
      name: 'extend-3',
      value: {
        color: 'var(--extend-3-on-extend-3)',
        backgroundColor: 'var(--extend-3-extend-3)'
      },
      color1: '#1291D0',
      color2: '#FFFFFF',
      example: 'White text on sky blue background'
    },
    onMain: {
      name: 'on-extend-3',
      value: {
        color: 'var(--extend-3-extend-3)',
        backgroundColor: 'var(--extend-3-on-extend-3)'
      },
      color1: '#FFFFFF',
      color2: '#1291D0',
      example: 'Sky blue text on white background'
    },
    container: {
      name: 'extend-3-container',
      value: {
        color: 'var(--extend-3-on-extend-3-container)',
        backgroundColor: 'var(--extend-3-extend-3-container)'
      },
      color1: '#E7F6FE',
      color2: '#1291D0',
      example: 'Sky blue text on light sky blue background'
    },
    onContainer: {
      name: 'on-extend-3-container',
      value: {
        color: 'var(--extend-3-extend-3-container)',
        backgroundColor: 'var(--extend-3-on-extend-3-container)'
      },
      color1: '#1291D0',
      color2: '#E7F6FE',
      example: 'Light sky blue text on sky blue background'
    }
  }
}
};

<div className="sb-container">
  <div className="sb-section-title">
    # Colors (Theme Classes)
    These tokens should be used for consistent color styling across applications.
  </div>

  <div className="sb-section">
    <div className="sb-colors-demo">

      <h2>Surface Colors</h2>
      <div className="color-grid">
        {Object.entries(colors.surface).map(([key, { name, value, color }]) => (
          <div key={key} className="color-item">
            <div className="color-preview" style={{ backgroundColor: convertHexRgba(color) }}></div>
            <div className="color-info">
              <code>{name}</code>
              <span>background-color: {value}</span>
            </div>
          </div>
        ))}
      </div>

      <h2>Surface Container Colors</h2>
       <div className="color-grid">
        {Object.entries(colors.surfaceContainer).map(([key, { name, value, color }]) => (
          <div key={key} className="color-item">
            <div className="color-preview" style={{ backgroundColor: convertHexRgba(color) }}></div>
            <div className="color-info">
              <code>{name}</code>
              <span>background-color: {value}</span>
            </div>
          </div>
        ))}
      </div>

      <h2>On Surface Colors</h2>
      <div className="color-grid">
      {Object.entries(colors.onSurface).map(([key, { name, value, color }]) => (
        <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              backgroundColor: 'white',
              color: convertHexRgba(color),
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontWeight: 'bold'
            }}
          >
            Text Color
          </div>
          <div className="color-info">
            <code>{name}</code>
            <span>color: {value}</span>
          </div>
        </div>
      ))}
      </div>

      <h2>Outline Colors</h2>
      <div className="color-grid">
      {Object.entries(colors.outline).map(([key, { name, value, color }]) => (
        <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              border: `4px solid ${convertHexRgba(color)}`,
              backgroundColor: 'white'
            }}
          ></div>
          <div className="color-info">
            <code>{name}</code>
            <span>border-color: {value}</span>
          </div>
        </div>
      ))}
      </div>

      <h2>Primary Colors</h2>
      <div className="color-grid">
        {Object.entries(colors.primary).map(([key, { name, value, color1, color2, example }]) => (
          <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              backgroundColor: convertHexRgba(color1),
              display: 'flex' ,
              alignItems: 'center',
              justifyContent: 'center',
              padding: '10px'
            }}
          >
            <div className="color-usage">
              <p style={{color: color2, textAlign: 'center'}}>{example}</p>
            </div>
            </div>
            <div className="color-info">
              <code>{name}</code>
              <span>
                <p style={{margin: '0'}}>color: {value.color}</p>
                <p style={{margin: '0'}}>background-color: {value.backgroundColor}</p>
              </span>
            </div>
          </div>
        ))}
      </div>

      <h2>Secondary Colors</h2>
      <div className="color-grid">
        {Object.entries(colors.secondary).map(([key, { name, value, color1, color2, example }]) => (
          <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              backgroundColor: convertHexRgba(color1),
              display: 'flex' ,
              alignItems: 'center',
              justifyContent: 'center',
              padding: '10px'
            }}
          >
            <div className="color-usage">
              <p style={{color: color2, textAlign: 'center'}}>{example}</p>
            </div>
            </div>
            <div className="color-info">
              <code>{name}</code>
              <span>
                <p style={{margin: '0'}}>color: {value.color}</p>
                <p style={{margin: '0'}}>background-color: {value.backgroundColor}</p>
              </span>
            </div>
          </div>
        ))}
      </div>

      <h2>Status Colors</h2>
      {Object.entries(colors.status).map(([statusType, statusColors]) => (
        <div key={statusType} className="color-section">
          <h3>{statusType.charAt(0).toUpperCase() + statusType.slice(1)}</h3>
          <div className="color-grid">
            {Object.entries(statusColors).map(([key, { name, value, color1, color2, example }]) => (
              <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              backgroundColor: convertHexRgba(color1),
              display: 'flex' ,
              alignItems: 'center',
              justifyContent: 'center',
              padding: '10px'
            }}
          >
            <div className="color-usage">
              <p style={{color: color2, textAlign: 'center'}}>{example}</p>
            </div>
            </div>
            <div className="color-info">
              <code>{name}</code>
              <span>
                <p style={{margin: '0'}}>color: {value.color}</p>
                <p style={{margin: '0'}}>background-color: {value.backgroundColor}</p>
              </span>
            </div>
              </div>
            ))}
          </div>
        </div>
      ))}

      <h2>Extended Colors</h2>
      {Object.entries(colors.extended).map(([extendType, extendColors]) => (
        <div key={extendType} className="color-section">
          <h3>{extendType.replace(/([A-Z])/g, ' $1').trim()}</h3>
          <div className="color-grid">
            {Object.entries(extendColors).map(([key, { name, value, color1, color2, example }]) => (
              <div key={key} className="color-item">
          <div 
            className="color-preview" 
            style={{ 
              backgroundColor: convertHexRgba(color1),
              display: 'flex' ,
              alignItems: 'center',
              justifyContent: 'center',
              padding: '10px'
            }}
          >
            <div className="color-usage">
              <p style={{color: color2, textAlign: 'center'}}>{example}</p>
            </div>
            </div>
            <div className="color-info">
              <code>{name}</code>
              <span>
                <p style={{margin: '0'}}>color: {value.color}</p>
                <p style={{margin: '0'}}>background-color: {value.backgroundColor}</p>
              </span>
            </div>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</div>

<style>
  {`
    .sb-container {
      margin-bottom: 48px;
    }

    .sb-section-title {
      margin-bottom: 32px;
    }

    .sb-colors-demo {
      width: 100%;
    }

    h2 {
      margin: 32px 0 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid #E6E6E6;
    }

    h3 {
      margin-top: 24px;
      margin-bottom: 16px;
    }

    .color-section {
      margin-bottom: 32px;
    }

    .color-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .color-item {
      border: 1px solid #E6E6E6;
      border-radius: 4px;
      overflow: hidden;
    }

    .color-preview {
      height: 100px;
      border-bottom: 1px solid #E6E6E6;
    }

    .color-info {
      padding: 12px;
      background: #FFFFFF;
    }

    .color-info code {
      display: block;
      margin-bottom: 4px;
      font-family: monospace;
      font-size: 12px;
      color: #666;
    }

    .color-info span {
      font-size: 14px;
      color: #333;
    }

    .color-item:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .color-example {
      font-size: 12px;
      color: inherit;
      text-align: center;
      opacity: 0.7;
    }
  `}
</style> 